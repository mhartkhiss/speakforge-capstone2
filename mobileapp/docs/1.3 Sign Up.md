# 1.3 Sign Up

## Front-end Components

- **SignUpActivity**: Main registration screen extending BaseAuthActivity
  - Email EditText: Input field for user email address
  - Password EditText: Input field for user password
  - Confirm Password EditText: Input field for password confirmation
  - Sign Up Button: Triggers account creation process
  - Login TextView: Link to return to login screen

- **BaseAuthActivity**: Base class providing common authentication UI elements
  - Logo ImageView: App branding with scale-fade animations
  - Form container: Holds registration form with slide-up animation
  - Keyboard visibility handling for dynamic UI adjustments

- **UI Components**:
  - ProgressDialog: Loading indicator during account creation
  - CustomDialog: Success/error message displays
  - AnimationUtils: Scale-fade and slide-up transitions

## Back-end Components

- **FirebaseAuth**: Firebase authentication service
  - createUserWithEmailAndPassword(): Creates new user account
  - signOut(): Signs out user after successful registration
  - FirebaseAuthUserCollisionException: Handles duplicate email errors

- **FirebaseDatabase**: Real-time database for user profile storage
  - users/{userId} reference: Creates user profile entry
  - setValue(): Stores User object with account details
  - onCompleteListener: Handles database write completion

- **User Model**: Data structure for user profile information
  - Constructor with userId, username, email, profileImageUrl, accountType, language, timestamps
  - Fields: userId, username, email, language, accountType, translator, createdAt, lastLoginDate

- **Validation Logic**: Input field validation
  - Email pattern matching using Patterns.EMAIL_ADDRESS
  - Password length validation (minimum 6 characters)
  - Password confirmation matching

## Plant UML Diagrams

### Class Diagram (MVC Model)

```plantuml
@startuml Sign Up Class Diagram

class "Model" as Model {
  - Classes: FirebaseAuth.java, FirebaseDatabase.java,
    User.java, Patterns.java
  - Methods: createUserWithEmailAndPassword(), signOut(),
    getReference(), setValue(), EMAIL_ADDRESS, userId,
    username, email, accountType
}

class "View" as View {
  - Classes: SignUpActivity.java, BaseAuthActivity.java,
    ProgressDialog.java, CustomDialog.java
  - Layouts: activity_sign_up.xml
  - Elements: email, password, confirmPassword, btnSignUp,
    txtLogin, speakForgeLogo, signupFormContainer
  - Methods: show(), dismiss(), showDialog()
}

class "Controller" as Controller {
  - Classes: SignUpActivity.java, BaseAuthActivity.java
  - Methods: onCreate(), onClick(), signUpUser(),
    validateSignUpFields(), goToLoginActivity(),
    setupKeyboardVisibilityListener()
}

Model --> Controller : provides data
Controller --> View : updates UI
View --> Controller : user input

@enduml
```

### Sequence Diagram

```plantuml
@startuml Sign Up Sequence Diagram

actor User
participant SignUpActivity
participant FirebaseAuth
participant FirebaseDatabase
participant LoginActivity

User -> SignUpActivity: Enter details and click sign up
SignUpActivity -> SignUpActivity: Validate input
SignUpActivity -> FirebaseAuth: createUserWithEmailAndPassword()
FirebaseAuth --> SignUpActivity: Account created
SignUpActivity -> FirebaseDatabase: Store user profile
FirebaseDatabase --> SignUpActivity: Profile stored
SignUpActivity -> FirebaseAuth: signOut()
SignUpActivity -> LoginActivity: Navigate to login

@enduml
```

### Data Design Diagram

```plantuml
@startuml Sign Up Data Design Diagram

database "Firebase Auth" as Auth {
  userId : String <<PK>>
  email : String <<unique>>
  emailVerified : boolean = false
  createdAt : timestamp
}

database "users/{userId}" as UserDB {
  userId : String <<PK>>
  username : String
  email : String <<FK>>
  language : String = "none"
  accountType : String = "free"
  translator : String = "google"
  createdAt : String
  lastLoginDate : String
}

class ValidationRules {
  +emailPattern : Pattern
  +minPasswordLength : int = 6
  +requirePasswordConfirmation : boolean = true
}

class SignUpForm {
  +email : String
  +password : String
  +confirmPassword : String
}

ValidationRules --> SignUpForm : validates
Auth --> UserDB : creates profile
SignUpForm --> Auth : provides data
SignUpForm --> UserDB : provides data

@enduml
```