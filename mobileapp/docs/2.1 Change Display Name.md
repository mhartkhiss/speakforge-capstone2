# 2.1 Change Display Name

## Front-end Components

- **ProfileFragment**: Main profile screen displaying user information
  - Username TextView: Shows current display name
  - Menu button for username change: Triggers display name modification

- **ChangeUsernameControl**: Controller handling username change operations
  - BottomSheetDialog: Modal dialog for username input
  - EditText for username input: Text field for new display name
  - Save button: Confirms username change

- **UI Layout (fragment_profile.xml)**: Profile screen layout
  - Elements: textViewUsername, btnMenuChangeUsername, cardViewProfile
  - Bottom sheet layout for username editing

## Back-end Components

- **FirebaseDatabase**: Real-time database for user data storage
  - users/{userId}/username reference: Stores display name
  - setValue(): Updates username in database
  - onSuccess/onFailure listeners: Handle update completion

- **ChangeUsernameControl**: Business logic for username management
  - updateUsername(): Validates and saves new username
  - Input validation: Ensures username is not empty

## Plant UML Diagrams

### Class Diagram (MVC Model)

```plantuml
@startuml Change Display Name Class Diagram

class "Model" as Model {
  - Classes: FirebaseDatabase.java
  - Methods: getReference(), setValue(),
    addOnSuccessListener(), addOnFailureListener()
}

class "View" as View {
  - Classes: ProfileFragment.java, BottomSheetDialog
  - Layouts: fragment_profile.xml, bottom_sheet_username.xml
  - Elements: textViewUsername, editTextUsername, btnSaveChanges,
    btnMenuChangeUsername, cardViewProfile
  - Methods: show(), dismiss(), setText()
}

class "Controller" as Controller {
  - Classes: ChangeUsernameControl.java, ProfileFragment.java
  - Methods: setupUsernameDialog(), updateUsername(),
    onCreateView(), setListeners()
}

Model --> Controller : provides data
Controller --> View : updates UI
View --> Controller : user input

@enduml
```

### Sequence Diagram

```plantuml
@startuml Change Display Name Sequence Diagram

actor User
participant ProfileFragment
participant ChangeUsernameControl
participant FirebaseDatabase

User -> ProfileFragment: Click change username menu
ProfileFragment -> ChangeUsernameControl: Show username dialog
ChangeUsernameControl -> ProfileFragment: Display BottomSheetDialog
User -> ChangeUsernameControl: Enter new username
User -> ChangeUsernameControl: Click save button
ChangeUsernameControl -> ChangeUsernameControl: Validate input
ChangeUsernameControl -> FirebaseDatabase: Update username
FirebaseDatabase --> ChangeUsernameControl: Update success
ChangeUsernameControl -> ProfileFragment: Show success notification
ChangeUsernameControl -> ProfileFragment: Dismiss dialog

@enduml
```

### Data Design Diagram

```plantuml
@startuml Change Display Name Data Design Diagram

database "users/{userId}" as UserDB {
  userId : String <<PK>>
  username : String
  email : String
  accountType : String
}

class UsernameUpdate {
  +newUsername : String
  +validation : boolean = !empty
}

UserDB --> UsernameUpdate : current value
UsernameUpdate --> UserDB : updated value

@enduml
```
