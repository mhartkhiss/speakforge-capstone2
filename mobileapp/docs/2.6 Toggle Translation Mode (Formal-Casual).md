# 2.6 Toggle Translation Mode (Formal/Casual)

## Front-end Components

- **ProfileFragment**: Profile screen with translation mode toggle
  - Translation mode display TextView: Shows current mode (Formal/Casual)
  - Menu button for translation mode: Opens mode selection dialog

- **TranslationModeManager**: Utility class managing translation mode UI
  - Floating toggle button: CardView with icon and label for mode switching
  - AlertDialog: Selection dialog for formal/casual mode choice
  - Visual indicators: Different colors and icons for each mode

- **Translation Mode Toggle Layout**: Custom toggle button layout
  - CardView container: Clickable toggle area
  - ImageView icon: Visual representation of current mode
  - TextView label: "Formal" or "Casual" text display

## Back-end Components

- **SharedPreferences**: Local storage for translation mode preference
  - PREF_FORMAL_TRANSLATION_MODE: Boolean flag for formal mode setting
  - Persistent storage: Maintains setting across app sessions

- **TranslationModeManager**: Business logic for mode management
  - initializeFromPreferences(): Loads saved mode on app start
  - saveToPreferences(): Persists mode changes to storage
  - showTranslationModeDialog(): Presents mode selection options

- **Variables Class**: Global translation mode state
  - isFormalTranslationMode: Application-wide boolean flag
  - Real-time updates: Reflects current translation mode setting

## Plant UML Diagrams

### Class Diagram (MVC Model)

```plantuml
@startuml Toggle Translation Mode Class Diagram

class "Model" as Model {
  - Classes: SharedPreferences.java, Variables.java
  - Methods: getBoolean(), putBoolean(), apply(),
    PREF_FORMAL_TRANSLATION_MODE, isFormalTranslationMode
}

class "View" as View {
  - Classes: ProfileFragment.java, TranslationModeManager.java,
    AlertDialog.java, CardView.java
  - Layouts: fragment_profile.xml, translation_mode_toggle.xml
  - Elements: textViewTranslationModeValue, btnMenuTranslationMode,
    modeIcon, modeLabel, translationModeToggle
  - Methods: setText(), setImageResource(), setCardBackgroundColor(),
    show(), dismiss()
}

class "Controller" as Controller {
  - Classes: TranslationModeManager.java, ProfileFragment.java
  - Methods: initializeFromPreferences(), saveToPreferences(),
    showTranslationModeDialog(), createToggleButton(),
    onTranslationModeChanged(), setListeners()
}

Model --> Controller : provides storage
Controller --> View : updates UI
View --> Controller : user input

@enduml
```

### Sequence Diagram

```plantuml
@startuml Toggle Translation Mode Sequence Diagram

actor User
participant ProfileFragment
participant TranslationModeManager
participant SharedPreferences
participant Variables

User -> ProfileFragment: Click translation mode menu
ProfileFragment -> TranslationModeManager: Show mode dialog
TranslationModeManager -> ProfileFragment: Display AlertDialog
User -> TranslationModeManager: Select formal/casual mode
TranslationModeManager -> TranslationModeManager: Update mode state
TranslationModeManager -> SharedPreferences: Save preference
SharedPreferences --> TranslationModeManager: Save success
TranslationModeManager -> Variables: Update global flag
TranslationModeManager -> ProfileFragment: Dismiss dialog
TranslationModeManager -> ProfileFragment: Update UI display

@enduml
```

### Data Design Diagram

```plantuml
@startuml Toggle Translation Mode Data Design Diagram

database "SharedPreferences" as Prefs {
  PREF_FORMAL_TRANSLATION_MODE : boolean = false
}

class Variables {
  +isFormalTranslationMode : boolean = false
}

class TranslationMode {
  +currentMode : boolean
  +displayText : String
  +iconResource : int
  +backgroundColor : int
}

Prefs --> Variables : initializes
Variables --> TranslationMode : determines state
TranslationMode --> ProfileFragment : updates display

@enduml
```
